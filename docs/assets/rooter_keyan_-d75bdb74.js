import{_ as E,d as w,o as r,c as g,a as d,a3 as _,b as s,w as i,F as b,S as T,C as f,e as m}from"./index-d5078496.js";import{E as q}from"./el-overlay-4a657f48.js";import{E as L,a as N,b as B}from"./el-input-979ff7e8.js";import{E as U}from"./el-pagination-628e7d1b.js";import{E as n,b as I,a as W}from"./el-table-column-b98b4400.js";import"./el-select-861d9426.js";import{E as X}from"./el-popover-85297077.js";import{E as G}from"./el-button-3885cb18.js";/* empty css                   */import{c}from"./cloneDeep-5a465b49.js";import{E as H}from"./el-link-d8ecbc74.js";import{p as D,a as F,b as C,c as O,d as J,e as K,f as Q,g as Y,h as Z,i as x,j as ee,k as te,s as ae,l as oe,m as se,n as ie}from"./patent-f689d4ac.js";import{u as le,a as ne,b as re,c as pe}from"./userinfo-92b52d52.js";import"./validator-007fc418.js";const ue=w({props:{mainTitle:{type:String,required:!0},muncObj:{type:Array,required:!0}},data(){return{MainTitle:this.mainTitle,FuncObj:this.muncObj,pageSize:[3,5,7,10,20,30],dat:{},topics:[],resultData:{},requestData:{current:1,size:7},topic:{},choseRow:{},dialogFormVisible:!1,formLabelWidth:70,dialogVisible:!1,wantAdd:!0,rules:{}}},mounted(){this.getTopicPage()},methods:{getTopicPage(){this.FuncObj[3](this.requestData).then(e=>{e.success?(console.log(e),this.topics=e.data.page.records,e.data.page&&(this.resultData=e.data.page),this.topic=this.topics[0]):(console.log("请求失败 ===> ",e),this.FuncObj[3]({current:1,size:7}).then(t=>{t.success?(this.resultData=t.data.page,this.topics=t.data.page.records):n({message:"该项数据为空 !!!",type:"warning"})}))}).catch(e=>{console.log(e)})},handleSizeChange(e){this.requestData.size=e,this.getTopicPage()},handleCurrentChange(e){this.requestData.current=e,this.getTopicPage()},showDialog(e,t){console.log("保存数据----------------",e),this.wantAdd=e,this.dat=c(t),e?(this.topic=c(this.topic),this.setObjPropsToNull(this.topic)):(this.topic=c(t),console.log(t)),this.dialogFormVisible=!0},del(e){const t={id:e};this.FuncObj[1](t).then(a=>{a.success?(this.getTopicPage(e),e%2!=0?(this.requestData.current-=1,this.getTopicPage()):this.getTopicPage(this.requestData.current),n({message:"数据删除成功!",type:"success"})):n({message:a.msg+", 数据删除失败!",type:"warning"})}).catch(a=>{console.log("访问错误",a),n.error("删除错误，代码可能有错！"+a)})},async save(){await this.$refs.dialogFormRef.validate((e,t)=>{e&&(this.wantAdd?this.FuncObj[0](this.topic).then(a=>{a.success?(n({message:"数据添加成功!",type:"success"}),this.requestData.current=Math.ceil((this.resultData.total+1)/this.resultData.size),this.getTopicPage()):n({message:a.msg+" 数据添加失败! ",type:"warning"})}).catch(a=>{n.error("添加错误，网络接口出错！")}):this.FuncObj[2](this.topic).then(a=>{a.success?(n({message:"数据修改成功! ",type:"success"}),this.getTopicPage()):n({message:a.msg+" 数据修改失败!! ",type:"warning"})}).catch(a=>{n.error("修改错误，网络接口出错！")}),this.dialogFormVisible=!1)})},resetForm(){console.log(this.$refs.dialogFormRef),this.$refs.dialogFormRef.resetFields(),this.wantAdd?this.topic=c(this.topic):this.topic=c(this.dat)},setObjPropsToNull(e){Object.keys(e).forEach(t=>{e[t]=null})},getRandColor(){let e=["primary","success","warming","danger","info"],t=Math.floor(Math.random()*e.length);return e[t]}},watch:{mainTitle:{handler(e,t){this.MainTitle=e,console.log("点击了新的选项!!!")}},muncObj:{deep:!0,handler(e,t){this.FuncObj=e,this.getTopicPage()}}}}),de={class:"tools"},ce={style:{"margin-top":"10px","margin-left":"30%"}},me={class:"dialog-footer"};function ge(e,t,a,k,M,z){const h=I,p=G,y=X,u=W,j=U,V=L,$=N,v=B,A=q;return r(),g("div",null,[d("div",de,[d("h3",null,_(e.MainTitle)+"管理",1)]),d("div",null,[s(u,{"max-height":"600",data:e.topics,style:{width:"100%"}},{default:i(()=>[(r(!0),g(b,null,T(e.topic,(o,l)=>(r(),f(h,{prop:l,label:l,key:l.id,formatter:e.getCategoryNameFormat},null,8,["prop","label","formatter"]))),128)),s(h,{fixed:"right",label:"功能管理",width:"170"},{default:i(o=>[s(p,{size:"small",onClick:l=>e.showDialog(!1,o.row)},{default:i(()=>[m("编辑")]),_:2},1032,["onClick"]),s(y,{title:"删除将无法恢复！确定删除?",onConfirm:l=>e.del(o.row.id)},{reference:i(()=>[s(p,{size:"small",type:"danger"},{default:i(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),s(p,{icon:"Plus",style:{width:"100%","background-color":"#e3f7d8"},onClick:t[0]||(t[0]=o=>e.showDialog(!0))}),d("div",ce,[s(j,{"current-page":e.resultData.current,"onUpdate:currentPage":t[1]||(t[1]=o=>e.resultData.current=o),"page-size":e.resultData.size,"onUpdate:pageSize":t[2]||(t[2]=o=>e.resultData.size=o),small:e.small,disabled:e.disabled,background:e.background,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.resultData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","small","disabled","background","page-sizes","total","onSizeChange","onCurrentChange"])]),s(A,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[4]||(t[4]=o=>e.dialogFormVisible=o),title:e.wantAdd?e.MainTitle+"添加":e.MainTitle+"修改"},{footer:i(()=>[d("span",me,[s(p,{onClick:t[3]||(t[3]=o=>e.resetForm())},{default:i(()=>[m("重置")]),_:1}),s(p,{type:"primary",onClick:e.save},{default:i(()=>[m(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[s(v,{ref:"dialogFormRef",model:e.topic,rules:e.rules},{default:i(()=>[(r(!0),g(b,null,T(e.topic,(o,l,R)=>(r(),f($,{label:l,prop:l,key:R,"label-width":e.formLabelWidth},{default:i(()=>[(r(),f(V,{modelValue:e.topic[l],"onUpdate:modelValue":S=>e.topic[l]=S,autocomplete:"off",clearable:"",key:l},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label","prop","label-width"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const P=E(ue,[["render",ge],["__scopeId","data-v-2d66095b"]]),he=w({data(){return{userid:1,flash:!0,information:[{MainTitle:"论文",FuncObj:[D,F,C,O]},{MainTitle:"<禁止删除>著作",FuncObj:[J,K,Q,Y]},{MainTitle:"专利",FuncObj:[Z,x,ee,te]},{MainTitle:"<禁止删除>课题",FuncObj:[ae,oe,se,ie]},{MainTitle:"用户",FuncObj:[le,ne,re,pe]}],ObjDataapi:{MainTitle:"论文",FuncObj:[D,F,C,O]}}},methods:{getRandColor(){let e=["primary","success","warming","danger","info"],t=Math.floor(Math.random()*e.length);return e[t]},btnLink(e){this.ObjDataapi=this.information[e],console.log(e,this.ObjDataapi)}},components:{RooterModelPage:P}});function fe(e,t,a,k,M,z){const h=H,p=P;return r(),g(b,null,[(r(!0),g(b,null,T(e.information,(y,u)=>(r(),f(h,{style:{"margin-left":"20px"},onClick:j=>e.btnLink(u),href:"",type:e.getRandColor(),target:"_blank",key:u,userido:e.userid},{default:i(()=>[m(_(u)+"、"+_(y.MainTitle),1)]),_:2},1032,["onClick","type","userido"]))),128)),s(p,{mainTitle:e.ObjDataapi.MainTitle,muncObj:e.ObjDataapi.FuncObj},null,8,["mainTitle","muncObj"])],64)}const ze=E(he,[["render",fe]]);export{ze as default};

import{ag as de,B as te,ah as fe,ai as me,ae as W,aj as ve,ak as pe,q as G,al as ye,i as se,am as Z,z as q,an as ge,ao as Ce,ap as be,aq as he,ar as U,g as J,h as j,d as Y,b as R,as as V,V as b,at as Ee,ab as ke,p as we,au as _,av as Me,y as $,o as L,c as X,a as H,D as E,E as o,a3 as Be,w as I,C as x,P as De,J as Ie,I as K,G as ae,Y as ne,aw as Te,ax as Se,t as Ae,ay as Q,r as T,az as Fe,A as Le,aA as $e,aB as Oe,aC as ee,aD as Pe,aE as oe,aF as ze,T as Ne,aG as Re,a4 as Ye,aH as He,U as Ue,W as Ve,X as Xe,a1 as We}from"./index-d5078496.js";import{a as qe,U as le}from"./el-button-3885cb18.js";const je=(...e)=>t=>{e.forEach(l=>{de(l)?l(t):l.value=t})},xe=(e,t,l)=>{let u={offsetX:0,offsetY:0};const r=a=>{const c=a.clientX,v=a.clientY,{offsetX:f,offsetY:p}=u,s=e.value.getBoundingClientRect(),m=s.left,k=s.top,O=s.width,P=s.height,z=document.documentElement.clientWidth,S=document.documentElement.clientHeight,N=-m+f,A=-k+p,w=z-m-O+f,M=S-k-P+p,F=h=>{const n=Math.min(Math.max(f+h.clientX-c,N),w),C=Math.min(Math.max(p+h.clientY-v,A),M);u={offsetX:n,offsetY:C},e.value.style.transform=`translate(${W(n)}, ${W(C)})`},y=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};te(()=>{fe(()=>{l.value?d():i()})}),me(()=>{i()})},Ke=(e,t={})=>{ve(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||G("popup"),u=ye(()=>l.bm("parent","hidden"));if(!se||Z(document.body,u.value))return;let r=0,d=!1,i="0";const a=()=>{setTimeout(()=>{he(document==null?void 0:document.body,u.value),d&&document&&(document.body.style.width=i)},200)};q(e,c=>{if(!c){a();return}d=!Z(document.body,u.value),d&&(i=document.body.style.width),r=qe(l.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=ge(document.body,"overflowY");r>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),Ce(document.body,u.value)}),be(()=>a())},ue=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let t=!1,l=!1;return{onClick:i=>{t&&l&&e(i),t=l=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{l=i.target===i.currentTarget}}},Ge=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Je={click:e=>e instanceof MouseEvent},Ze="overlay";var _e=Y({name:"ElOverlay",props:Ge,emits:Je,setup(e,{slots:t,emit:l}){const u=G(Ze),r=c=>{l("click",c)},{onClick:d,onMousedown:i,onMouseup:a}=ue(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[u.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:a},[b(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):Ee("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(t,"default")])}});const Qe=_e,ie=Symbol("dialogInjectionKey"),re=J({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),eo={close:()=>!0},oo=["aria-label"],to=["id"],so=Y({name:"ElDialogContent"}),ao=Y({...so,props:re,emits:eo,setup(e){const t=e,{t:l}=we(),{Close:u}=Te,{dialogRef:r,headerRef:d,bodyId:i,ns:a,style:c}=_(ie),{focusTrapRef:v}=_(Me),f=je(v,r),p=$(()=>t.draggable);return xe(r,d,p),(s,m)=>(L(),X("div",{ref:o(f),class:E([o(a).b(),o(a).is("fullscreen",s.fullscreen),o(a).is("draggable",o(p)),o(a).is("align-center",s.alignCenter),{[o(a).m("center")]:s.center},s.customClass]),style:ae(o(c)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:d,class:E(o(a).e("header"))},[b(s.$slots,"header",{},()=>[H("span",{role:"heading",class:E(o(a).e("title"))},Be(s.title),3)]),s.showClose?(L(),X("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:E(o(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=k=>s.$emit("close"))},[R(o(Ie),{class:E(o(a).e("close"))},{default:I(()=>[(L(),x(De(s.closeIcon||o(u))))]),_:1},8,["class"])],10,oo)):K("v-if",!0)],2),H("div",{id:o(i),class:E(o(a).e("body"))},[b(s.$slots,"default")],10,to),s.$slots.footer?(L(),X("footer",{key:0,class:E(o(a).e("footer"))},[b(s.$slots,"footer")],2)):K("v-if",!0)],6))}});var no=ne(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=J({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),uo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:e=>Se(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,t)=>{const u=$e().emit,{nextZIndex:r}=Ae();let d="";const i=Q(),a=Q(),c=T(!1),v=T(!1),f=T(!1),p=T(e.zIndex||r());let s,m;const k=Fe("namespace",Oe),O=$(()=>{const g={},D=`--${k.value}-dialog`;return e.fullscreen||(e.top&&(g[`${D}-margin-top`]=e.top),e.width&&(g[`${D}-width`]=W(e.width))),g}),P=$(()=>e.alignCenter?{display:"flex"}:{});function z(){u("opened")}function S(){u("closed"),u(le,!1),e.destroyOnClose&&(f.value=!1)}function N(){u("close")}function A(){m==null||m(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>y(),e.openDelay):y()}function w(){s==null||s(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>h(),e.closeDelay):h()}function M(){function g(D){D||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):w()}function F(){e.closeOnClickModal&&M()}function y(){se&&(c.value=!0)}function h(){c.value=!1}function n(){u("openAutoFocus")}function C(){u("closeAutoFocus")}function B(g){var D;((D=g.detail)==null?void 0:D.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&Ke(c);function ce(){e.closeOnPressEscape&&M()}return q(()=>e.modelValue,g=>{g?(v.value=!1,A(),f.value=!0,p.value=e.zIndex?p.value++:r(),Le(()=>{u("open"),t.value&&(t.value.scrollTop=0)})):c.value&&w()}),q(()=>e.fullscreen,g=>{t.value&&(g?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,f.value=!0,A())}),{afterEnter:z,afterLeave:S,beforeLeave:N,handleClose:M,onModalClick:F,close:w,doClose:h,onOpenAutoFocus:n,onCloseAutoFocus:C,onCloseRequested:ce,onFocusoutPrevented:B,titleId:i,bodyId:a,closed:v,style:O,overlayDialogStyle:P,rendered:f,visible:c,zIndex:p}},ro=["aria-label","aria-labelledby","aria-describedby"],co=Y({name:"ElDialog",inheritAttrs:!1}),fo=Y({...co,props:lo,emits:uo,setup(e,{expose:t}){const l=e,u=Pe();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!u.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!l.customClass));const r=G("dialog"),d=T(),i=T(),a=T(),{visible:c,titleId:v,bodyId:f,style:p,overlayDialogStyle:s,rendered:m,zIndex:k,afterEnter:O,afterLeave:P,beforeLeave:z,handleClose:S,onModalClick:N,onOpenAutoFocus:A,onCloseAutoFocus:w,onCloseRequested:M,onFocusoutPrevented:F}=io(l,d);ze(ie,{dialogRef:d,headerRef:i,bodyId:f,ns:r,rendered:m,style:p});const y=ue(N),h=$(()=>l.draggable&&!l.fullscreen);return t({visible:c,dialogContentRef:a}),(n,C)=>(L(),x(Xe,{to:"body",disabled:!n.appendToBody},[R(Ve,{name:"dialog-fade",onAfterEnter:o(O),onAfterLeave:o(P),onBeforeLeave:o(z),persisted:""},{default:I(()=>[Ne(R(o(Qe),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":o(k)},{default:I(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:o(v),"aria-describedby":o(f),class:E(`${o(r).namespace.value}-overlay-dialog`),style:ae(o(s)),onClick:C[0]||(C[0]=(...B)=>o(y).onClick&&o(y).onClick(...B)),onMousedown:C[1]||(C[1]=(...B)=>o(y).onMousedown&&o(y).onMousedown(...B)),onMouseup:C[2]||(C[2]=(...B)=>o(y).onMouseup&&o(y).onMouseup(...B))},[R(o(Re),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(w),onFocusoutPrevented:o(F),onReleaseRequested:o(M)},{default:I(()=>[o(m)?(L(),x(no,Ye({key:0,ref_key:"dialogContentRef",ref:a},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:o(h),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,onClose:o(S)}),He({header:I(()=>[n.$slots.title?b(n.$slots,"title",{key:1}):b(n.$slots,"header",{key:0,close:o(S),titleId:o(v),titleClass:o(r).e("title")})]),default:I(()=>[b(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:I(()=>[b(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[Ue,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=ne(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=We(mo);export{yo as E,Qe as a,Ke as b,ue as c,xe as u};

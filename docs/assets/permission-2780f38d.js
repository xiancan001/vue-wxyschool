import{g as ae,ab as Z,h as le,ax as W,a6 as q,k as M,d as Q,q as te,aE as oe,y as w,r as O,ae as ie,z as K,a$ as de,B as ne,o as f,c as V,a as C,E as d,D as v,bl as se,C as k,w as i,P as H,J as U,I as g,a3 as $,b as a,bH as re,G as _,H as ue,Y as pe,aA as me,A as fe,c6 as x,ak as ce,a1 as he,a8 as F,_ as be,bD as L,F as ve,e as E}from"./index-6beb3d85.js";import{E as ge}from"./el-overlay-798aa1cc.js";import{a as Ve,E as Ce,b as ye}from"./el-input-118885d8.js";import{E as we}from"./el-pagination-a86e46d2.js";import{E as T,a as ke,b as Ee}from"./el-table-column-409b1d59.js";import"./el-select-75127696.js";import{U as G,C as J,I as Y,c as Te,u as Se,d as Ie,e as Pe,E as Ue}from"./el-button-255fb666.js";import{c as Fe}from"./cloneDeep-94d042f3.js";import{i as Ne}from"./validator-e98441a3.js";const Be=ae({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Z},inactiveIcon:{type:Z},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:le(Function)},size:{type:String,validator:Ne},tabindex:{type:[String,Number]}}),Le={[G]:e=>W(e)||q(e)||M(e),[J]:e=>W(e)||q(e)||M(e),[Y]:e=>W(e)||q(e)||M(e)},We=["onClick"],$e=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],De=["aria-hidden"],ze=["aria-hidden"],Ae=["aria-hidden"],j="ElSwitch",qe=Q({name:j}),Me=Q({...qe,props:Be,emits:Le,setup(e,{expose:l,emit:u}){const n=e,R=me(),{formItem:S}=Te(),D=Se(),s=te("switch");oe({from:'"value"',replacement:'"model-value" or "v-model"',scope:j,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},w(()=>{var t;return!!((t=R.vnode.props)!=null&&t.value)}));const{inputId:b}=Ie(n,{formItemContext:S}),p=Pe(w(()=>n.loading)),I=O(n.modelValue!==!1),r=O(),h=O(),z=w(()=>[s.b(),s.m(D.value),s.is("disabled",p.value),s.is("checked",m.value)]),A=w(()=>({width:ie(n.width)}));K(()=>n.modelValue,()=>{I.value=!0}),K(()=>n.value,()=>{I.value=!1});const N=w(()=>I.value?n.modelValue:n.value),m=w(()=>N.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(N.value)||(u(G,n.inactiveValue),u(J,n.inactiveValue),u(Y,n.inactiveValue)),K(m,t=>{var c;r.value.checked=t,n.validateEvent&&((c=S==null?void 0:S.validate)==null||c.call(S,"change").catch(ee=>de()))});const y=()=>{const t=m.value?n.inactiveValue:n.activeValue;u(G,t),u(J,t),u(Y,t),fe(()=>{r.value.checked=m.value})},P=()=>{if(p.value)return;const{beforeChange:t}=n;if(!t){y();return}const c=t();[x(c),W(c)].includes(!0)||ce(j,"beforeChange must return type `Promise<boolean>` or `boolean`"),x(c)?c.then(X=>{X&&y()}).catch(X=>{}):c&&y()},B=w(()=>s.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),o=()=>{var t,c;(c=(t=r.value)==null?void 0:t.focus)==null||c.call(t)};return ne(()=>{r.value.checked=m.value}),l({focus:o,checked:m}),(t,c)=>(f(),V("div",{class:v(d(z)),style:_(d(B)),onClick:ue(P,["prevent"])},[C("input",{id:d(b),ref_key:"input",ref:r,class:v(d(s).e("input")),type:"checkbox",role:"switch","aria-checked":d(m),"aria-disabled":d(p),name:t.name,"true-value":t.activeValue,"false-value":t.inactiveValue,disabled:d(p),tabindex:t.tabindex,onChange:y,onKeydown:se(P,["enter"])},null,42,$e),!t.inlinePrompt&&(t.inactiveIcon||t.inactiveText)?(f(),V("span",{key:0,class:v([d(s).e("label"),d(s).em("label","left"),d(s).is("active",!d(m))])},[t.inactiveIcon?(f(),k(d(U),{key:0},{default:i(()=>[(f(),k(H(t.inactiveIcon)))]),_:1})):g("v-if",!0),!t.inactiveIcon&&t.inactiveText?(f(),V("span",{key:1,"aria-hidden":d(m)},$(t.inactiveText),9,De)):g("v-if",!0)],2)):g("v-if",!0),C("span",{ref_key:"core",ref:h,class:v(d(s).e("core")),style:_(d(A))},[t.inlinePrompt?(f(),V("div",{key:0,class:v(d(s).e("inner"))},[t.activeIcon||t.inactiveIcon?(f(),k(d(U),{key:0,class:v(d(s).is("icon"))},{default:i(()=>[(f(),k(H(d(m)?t.activeIcon:t.inactiveIcon)))]),_:1},8,["class"])):t.activeText||t.inactiveText?(f(),V("span",{key:1,class:v(d(s).is("text")),"aria-hidden":!d(m)},$(d(m)?t.activeText:t.inactiveText),11,ze)):g("v-if",!0)],2)):g("v-if",!0),C("div",{class:v(d(s).e("action"))},[t.loading?(f(),k(d(U),{key:0,class:v(d(s).is("loading"))},{default:i(()=>[a(d(re))]),_:1},8,["class"])):g("v-if",!0)],2)],6),!t.inlinePrompt&&(t.activeIcon||t.activeText)?(f(),V("span",{key:1,class:v([d(s).e("label"),d(s).em("label","right"),d(s).is("active",d(m))])},[t.activeIcon?(f(),k(d(U),{key:0},{default:i(()=>[(f(),k(H(t.activeIcon)))]),_:1})):g("v-if",!0),!t.activeIcon&&t.activeText?(f(),V("span",{key:1,"aria-hidden":!d(m)},$(t.activeText),9,Ae)):g("v-if",!0)],2)):g("v-if",!0)],14,We))}});var Oe=pe(Me,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Ke=he(Oe);const He=e=>F.request({url:"api/permission/page",method:"post",data:e}),Ge=e=>F.request({url:"api/permission/delete",params:e}),Je=e=>F.request({url:"api/permission/add",method:"post",data:e}),Ye=e=>F.request({url:"api/permission/edit",method:"post",data:e}),je=e=>F.request({url:"api/permission/one",method:"get",params:e}),Qe=Q({data(){return{adCates:[],page:{total:0,current:1,size:10},id:null,result:"",dialogFormVisible:!1,dialogForm:!1,adCate:{code:"",createTime:"",deleted:0,description:"",hasChildren:0,id:0,pid:0,type:"",updateTime:"",url:""},addpermission:{code:"",createTime:"",deleted:0,description:"",hasChildren:0,id:0,pid:0,type:"",updateTime:"",url:""},formLabelWidth:80}},mounted(){this.getperPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adCate=Fe(e)},getperPage(e){He({current:e,size:5}).then(u=>{console.log(u);const n=u.data.page;this.adCates=n.records,this.page=n}).catch(u=>{console.log(u)})},currentchange(e){this.getperPage(e),this.page.current=e},del(e){console.log(e),Ge({id:e}).then(u=>{if(u.success)this.getperPage(this.page.current);else return console.log(u.msg),!1}).catch(u=>{})},toAdd(){this.dialogForm=!0},save(){const e=this.adCate;e.id==0?Je(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getperPage(this.page.current),T(l.msg);else return T(l.msg),!1}).catch(l=>{T("网络错误联系管理员")}):Ye(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getperPage(this.page.current),T(l.msg);else return T(l.msg),!1}).catch(l=>{T("网络错误联系管理员")})},toSearch(e){je({id:e}).then(u=>{console.log(u.data.permission),this.adCates=[],this.adCates.push(u.data.permission)}).catch(u=>{console.log(u)}),this.id=null}}}),Re={style:{"text-align":"center"}},Xe={class:"adCates"},Ze={class:"adcate-tools"},_e={class:"dialog-footer"},xe={class:"dialog-footer"};function ea(e,l,u,n,R,S){const D=L("DocumentAdd"),s=U,b=Ue,p=Ce,I=L("Search"),r=Ve,h=Ee,z=L("EditPen"),A=L("Delete"),N=ke,m=we,y=Ke,P=ye,B=ge;return f(),V(ve,null,[C("h2",Re,"权限管理"+$(this.adCates.id),1),C("div",Xe,[C("div",Ze,[a(r,null,{default:i(()=>[a(b,{type:"primary",onClick:e.toAdd,plain:"",style:{"margin-left":"60px"}},{default:i(()=>[a(s,null,{default:i(()=>[a(D)]),_:1}),E("添加数据")]),_:1},8,["onClick"]),a(p,{placeholder:"输入id",style:{width:"120px","margin-left":"80px"},modelValue:e.id,"onUpdate:modelValue":l[0]||(l[0]=o=>e.id=o)},null,8,["modelValue"]),a(b,{icon:e.Search,circle:"",style:{"margin-left":"10px"},onClick:l[1]||(l[1]=o=>e.toSearch(this.id))},{default:i(()=>[a(s,null,{default:i(()=>[a(I)]),_:1})]),_:1},8,["icon"])]),_:1})]),a(N,{data:e.adCates,style:{width:"100%"}},{default:i(()=>[a(h,{fixed:"",prop:"id",label:"id",width:"80"}),a(h,{prop:"code",label:"code(权限码)",width:"120"}),a(h,{prop:"description",label:"description",width:"120"}),a(h,{prop:"url",label:"url(访问地址)",width:"230"}),a(h,{prop:"type",label:"type",width:"120"}),a(h,{prop:"pid",label:"pid",width:"50"}),a(h,{prop:"hasChildren",label:"子权限",width:"80"}),a(h,{prop:"createTime",label:"创建时间",width:"250"}),a(h,{fixed:"right",label:"操作",width:"220"},{default:i(o=>[a(b,{type:"danger",onClick:t=>e.toEdit(o.row),plain:""},{default:i(()=>[a(s,null,{default:i(()=>[a(z)]),_:1}),E("修改")]),_:2},1032,["onClick"]),a(b,{type:"primary",onClick:t=>e.del(o.row.id),plain:""},{default:i(()=>[a(s,null,{default:i(()=>[a(A)]),_:1}),E("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(m,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(B,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[10]||(l[10]=o=>e.dialogFormVisible=o),title:"权限编辑"},{footer:i(()=>[C("span",_e,[a(b,{onClick:l[9]||(l[9]=o=>e.dialogFormVisible=!1)},{default:i(()=>[E("Cancel")]),_:1}),a(b,{type:"primary",onClick:e.save},{default:i(()=>[E(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[a(P,{model:e.adCate},{default:i(()=>[a(r,{label:"code","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.code,"onUpdate:modelValue":l[2]||(l[2]=o=>e.adCate.code=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"description","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.description,"onUpdate:modelValue":l[3]||(l[3]=o=>e.adCate.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"pid","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.pid,"onUpdate:modelValue":l[4]||(l[4]=o=>e.adCate.pid=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"type","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.type,"onUpdate:modelValue":l[5]||(l[5]=o=>e.adCate.type=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"hasChildren","label-width":e.formLabelWidth},{default:i(()=>[a(y,{"active-value":"1","inactive-value":"0",modelValue:e.adCate.hasChildren,"onUpdate:modelValue":l[6]||(l[6]=o=>e.adCate.hasChildren=o)},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"updateTime","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.updateTime,"onUpdate:modelValue":l[7]||(l[7]=o=>e.adCate.updateTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"url","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.adCate.url,"onUpdate:modelValue":l[8]||(l[8]=o=>e.adCate.url=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(B,{modelValue:e.dialogForm,"onUpdate:modelValue":l[20]||(l[20]=o=>e.dialogForm=o),title:"权限添加"},{footer:i(()=>[C("span",xe,[a(b,{onClick:l[19]||(l[19]=o=>e.dialogForm=!1)},{default:i(()=>[E("Cancel")]),_:1}),a(b,{type:"primary",onClick:e.save},{default:i(()=>[E(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[a(P,{model:e.adCate},{default:i(()=>[a(r,{label:"code","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.code,"onUpdate:modelValue":l[11]||(l[11]=o=>e.addpermission.code=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"description","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.description,"onUpdate:modelValue":l[12]||(l[12]=o=>e.addpermission.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"pid","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.pid,"onUpdate:modelValue":l[13]||(l[13]=o=>e.addpermission.pid=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"type","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.type,"onUpdate:modelValue":l[14]||(l[14]=o=>e.addpermission.type=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"hasChildren","label-width":e.formLabelWidth},{default:i(()=>[a(y,{"active-value":"1","inactive-value":"0",modelValue:e.addpermission.hasChildren,"onUpdate:modelValue":l[15]||(l[15]=o=>e.addpermission.hasChildren=o)},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"createTime","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.createTime,"onUpdate:modelValue":l[16]||(l[16]=o=>e.addpermission.createTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"updateTime","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.updateTime,"onUpdate:modelValue":l[17]||(l[17]=o=>e.addpermission.updateTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(r,{label:"url","label-width":e.formLabelWidth},{default:i(()=>[a(p,{modelValue:e.addpermission.url,"onUpdate:modelValue":l[18]||(l[18]=o=>e.addpermission.url=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ua=be(Qe,[["render",ea]]);export{ua as default};

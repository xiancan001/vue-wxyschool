import{a8 as c,_ as V,d as C,o as E,c as R,a as p,b as o,w as a,F as y,e as u}from"./index-d5078496.js";import{E as _}from"./el-overlay-4a657f48.js";import{E as k,a as F,b as P}from"./el-input-979ff7e8.js";import{E as v}from"./el-pagination-628e7d1b.js";import{E as n,a as z,b as A}from"./el-table-column-b98b4400.js";import"./el-select-861d9426.js";import{E as $}from"./el-button-3885cb18.js";import{c as L}from"./cloneDeep-5a465b49.js";import"./validator-007fc418.js";const N=e=>c.request({url:"/api/classinfo/edit",method:"post",data:e}),U=e=>c.request({url:"/api/classinfo/add",method:"post",data:e}),W=e=>c.request({url:"/api/classinfo/all",method:"get",data:e}),q=e=>c.request({url:"/api/classinfo/delete",method:"get",params:e}),j=e=>c.request({url:"/api/classinfo/page",method:"post",data:e}),B=C({data(){return{communities:[],page:{colums:[],current:1,size:10},dialogFormVisible:!1,classEntity:{depart:"",id:0,major:"",name:"",school:"",state:0},choiceRow:{},formLabelWidth:80,isAdd:!1}},mounted(){this.getCommunitiesPage(1)},methods:{toEdit(e){console.log("既然你----"),this.choiceRow=L(e),this.dialogFormVisible=!0},getCommunitiesPage(e){W({current:1,size:1e3}).then(i=>{console.log("收到的回复："+JSON.stringify(i)),this.communities=i.data.classinfos,console.log("--------"+JSON.stringify(this.communities[0])),this.page=j}).catch(i=>{console.log(i)})},currentchange(e){this.getCommunitiesPage(e),this.page.current=e},del(e){console.log("id:---- "+e),console.log(e),q({id:e}).then(i=>{if(i.success)this.getCommunitiesPage(this.page.current),this.page.total%this.page.size==1?this.getAdCatesPage(this.page.current-1):this.getAdCatesPage(this.page.current);else return console.log(i.msg),!1}).catch(i=>{})},toAdd(){this.dialogFormVisible=!0,this.choiceRow=this.classEntity,this.isAdd=!0},save(){this.isAdd&&(console.log("添加方法"),this.isAdd=!1),console.log("添加的:"+JSON.stringify(this.choiceRow)),this.choiceRow.id===0?(console.log("进入添加方法------"),U(this.choiceRow).then(e=>{if(e.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")})):N(this.choiceRow).then(e=>{if(e.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")})}}}),I={class:"communities"},J={class:"choiceRow-tools"},O={class:"dialog-footer"};function S(e,l,i,T,D,M){const r=$,s=A,h=z,f=v,d=k,m=F,g=P,b=_;return E(),R(y,null,[p("div",I,[p("div",J,[o(r,{type:"warning",onClick:e.toAdd},{default:a(()=>[u("添加")]),_:1},8,["onClick"])]),o(h,{data:e.communities,style:{width:"100%"}},{default:a(()=>[o(s,{fixed:"",prop:"id",label:"#",width:"50"}),o(s,{prop:"name",label:"班级名称"}),o(s,{prop:"state",label:"状态"}),o(s,{prop:"depart",label:"学院"}),o(s,{prop:"school",label:"学校名称"}),o(s,{prop:"major",label:"专业"}),o(s,{fixed:"right",label:"操作",width:"120"},{default:a(t=>[o(r,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t.row)},{default:a(()=>[u("更新")]),_:2},1032,["onClick"]),o(r,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.dialogFormVisible=t),title:"广告类型编辑"},{footer:a(()=>[p("span",O,[o(r,{onClick:l[5]||(l[5]=t=>e.dialogFormVisible=!1)},{default:a(()=>[u("Cancel")]),_:1}),o(r,{type:"primary",onClick:e.save},{default:a(()=>[u(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[o(g,{model:e.choiceRow},{default:a(()=>[o(m,{label:"班级名称","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.choiceRow.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.choiceRow.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(m,{label:"专业","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.choiceRow.major,"onUpdate:modelValue":l[1]||(l[1]=t=>e.choiceRow.major=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(m,{label:"学院","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.choiceRow.depart,"onUpdate:modelValue":l[2]||(l[2]=t=>e.choiceRow.depart=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(m,{label:"学校名称","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.choiceRow.school,"onUpdate:modelValue":l[3]||(l[3]=t=>e.choiceRow.school=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(m,{label:"状态","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.choiceRow.state,"onUpdate:modelValue":l[4]||(l[4]=t=>e.choiceRow.state=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const oe=V(B,[["render",S]]);export{oe as default};

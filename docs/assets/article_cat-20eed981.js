import{_ as F,d as N,o as u,c as b,a as d,b as a,w as o,F as g,e as n,S as C,C as v,c4 as A,c5 as P}from"./index-1dae9f6e.js";import{E as $}from"./el-overlay-0bab04bc.js";import{E as L,a as T,b as U}from"./el-input-55c0597a.js";import{E as r,a as B,b as O}from"./el-table-column-6da1545f.js";import{E as S,a as W}from"./el-select-7cbccf1a.js";import{E as z,a as D}from"./el-col-b0561561.js";import{E as M}from"./el-button-4bf1a566.js";import{a as R,b as j,c as q,d as G}from"./index-3e4a2e52.js";import{c as H}from"./cloneDeep-c5edf04c.js";import"./validator-bce67e05.js";const J=N({data(){return{options:[{value:!0,label:"是"},{value:!1,label:"否"}],options1:[{value1:0,label1:"升序"},{value1:1,label1:"降序"}],value:"",value1:"",input:"",adCates:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,adCate:{catName:"",createTime:"",deleted:0,id:0,parentId:0,showInNav:!0,sortOrder:0,updateTime:""},formLabelWidth:80}},mounted(){this.getAdCatesPage()},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adCate=H(e)},getAdCatesPage(){R().then(e=>{console.log(e),console.log(e.data.articleCats),this.adCates=e.data.articleCats}).catch(e=>{console.log(e)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e),j({id:e}).then(p=>{if(p.success)this.getAdCatesPage(this.page.current);else return console.log(p),!1}).catch(p=>{})},toAdd(){this.dialogFormVisible=!0},save(){const e=this.adCate;e.id==0?q(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("网络错误联系管理员")}):G(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("网络错误联系管理员")})}}}),V=e=>(A("data-v-2dcf5ff0"),e=e(),P(),e),K={class:"adCates"},Q=V(()=>d("div",{class:"title"},[d("div",{class:"text"},[d("h1",null,"类别管理")])],-1)),X={class:"cat_rig"},Y=V(()=>d("div",{class:"grid-content bg-purple"},null,-1)),Z={class:"grid-content bg-purple"},x={class:"grid-content bg-purple"},ee={class:"grid-content bg-purple"},ae={class:"dialog-footer"};function le(e,l,p,te,oe,de){const m=D,f=L,s=M,w=z,i=O,E=B,c=T,_=S,h=W,k=U,I=$;return u(),b(g,null,[d("div",K,[Q,d("div",X,[a(w,{gutter:20},{default:o(()=>[a(m,{span:6},{default:o(()=>[Y]),_:1}),a(m,{span:6},{default:o(()=>[d("div",Z,[a(f,{modelValue:e.input,"onUpdate:modelValue":l[0]||(l[0]=t=>e.input=t),placeholder:"请输入id"},null,8,["modelValue"])])]),_:1}),a(m,{span:2},{default:o(()=>[d("div",x,[a(s,{type:"warning",onClick:e.search},{default:o(()=>[n("搜索")]),_:1},8,["onClick"])])]),_:1}),a(m,{span:2},{default:o(()=>[d("div",ee,[a(s,{type:"warning",onClick:e.toAdd},{default:o(()=>[n("添加")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),a(E,{data:e.adCates,style:{width:"100%"},border:""},{default:o(()=>[a(i,{fixed:"",prop:"id",label:"序号",width:"80"}),a(i,{prop:"catName",label:"类别名称",width:""}),a(i,{prop:"createTime",label:"创建时间",width:""}),a(i,{prop:"showInNav",label:"是否导航显示"}),a(i,{prop:"sortOrder",label:"排序",width:""}),a(i,{fixed:"right",label:"操作",width:""},{default:o(t=>[a(s,{link:"",type:"primary",size:"small",onClick:y=>e.toEdit(t.row)},{default:o(()=>[n("更新")]),_:2},1032,["onClick"]),a(s,{link:"",type:"primary",size:"small",onClick:y=>e.del(t.row.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),a(I,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.dialogFormVisible=t),title:"类别信息编辑"},{footer:o(()=>[d("span",ae,[a(s,{onClick:l[5]||(l[5]=t=>e.dialogFormVisible=!1)},{default:o(()=>[n("Cancel")]),_:1}),a(s,{type:"primary",onClick:e.save},{default:o(()=>[n(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[a(k,{model:e.adCate},{default:o(()=>[a(c,{label:"类别名称","label-width":e.formLabelWidth},{default:o(()=>[a(f,{modelValue:e.adCate.catName,"onUpdate:modelValue":l[1]||(l[1]=t=>e.adCate.catName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(c,{label:"父id","label-width":e.formLabelWidth},{default:o(()=>[a(f,{modelValue:e.adCate.parentId,"onUpdate:modelValue":l[2]||(l[2]=t=>e.adCate.parentId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(c,{label:"显示导航","label-width":e.formLabelWidth},{default:o(()=>[a(h,{modelValue:e.adCate.showInNav,"onUpdate:modelValue":l[3]||(l[3]=t=>e.adCate.showInNav=t),placeholder:"请选择"},{default:o(()=>[(u(!0),b(g,null,C(e.options,t=>(u(),v(_,{key:t.value,label:t.label,value:t.value,disabled:t.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(c,{label:"排序方式","label-width":e.formLabelWidth},{default:o(()=>[a(h,{modelValue:e.adCate.sortOrder,"onUpdate:modelValue":l[4]||(l[4]=t=>e.adCate.sortOrder=t),placeholder:"请选择"},{default:o(()=>[(u(!0),b(g,null,C(e.options1,t=>(u(),v(_,{key:t.value1,label:t.label1,value:t.value1,disabled:t.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ge=F(J,[["render",le],["__scopeId","data-v-2dcf5ff0"]]);export{ge as default};
